---
import BaseLayout from "@/layouts/base-layout.astro";
import { Picture } from "astro:assets";
import { FeaturedProducts } from "@/modules/products/components/featured-products";
import { Button, buttonVariants } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import {
  ArrowRight,
  Search,
  Wrench,
  Settings,
  Cog,
  Package,
} from "lucide-react";
import type { ForwardRefExoticComponent } from "react";
import bgHero from "@/assets/bg-hero.jpg";

interface ICategory {
  id: string;
  label: string;
  slug: string;
  icon: ForwardRefExoticComponent<React.SVGProps<SVGSVGElement>>;
}
const categories: ICategory[] = [
  {
    id: "milling",
    label: "Milling",
    slug: "milling",
    icon: Wrench,
  },
  {
    id: "turning",
    label: "Turning",
    slug: "turning",
    icon: Settings,
  },
  {
    id: "spare-parts",
    label: "Spare Parts",
    slug: "spare-parts",
    icon: Cog,
  },
  {
    id: "tooling",
    label: "Tooling",
    slug: "tooling",
    icon: Package,
  },
];
---

<BaseLayout title="Haebot Store - Suku Cadang CNC">
  {/* Hero Section */}
  <section class="relative flex min-h-[500px] items-center lg:min-h-[600px]">
    <div class="absolute inset-0 overflow-hidden">
      <Picture
        src={bgHero}
        formats={["avif", "webp"]}
        layout="constrained"
        alt=""
        aria-label=""
        aria-hidden="true"
        loading="eager"
        fetchpriority="high"
        class="absolute inset-0 bg-cover bg-bottom"
      />
      <div
        class="from-primary/75 via-primary/50 to-primary/25 absolute inset-0 bg-linear-to-r"
      >
      </div>
    </div>

    <div class="relative z-10 container mx-auto max-w-7xl px-4">
      <div class="max-w-2xl">
        <h1
          class="text-primary-foreground mb-4 text-3xl leading-tight font-bold md:text-4xl lg:text-5xl"
        >
          Suku Cadang Presisi untuk Pemesinan Profesional
        </h1>
        <p class="text-primary-foreground/80 mb-8 text-lg md:text-xl">
          Distributor terpercaya untuk peralatan CNC, suku cadang mesin, dan
          tooling berkualitas tinggi di Indonesia.
        </p>

        {/* Search Bar - using standard form for navigation */}
        <form action="/katalog" method="get" class="mb-8">
          <div class="flex gap-2">
            <div class="relative flex-1">
              <Search
                className="text-muted-foreground absolute top-1/2 left-4 h-5 w-5 -translate-y-1/2"
              />
              <Input
                type="text"
                name="search"
                placeholder="Cari berdasarkan SKU, Nama Bagian, atau Model Mesin..."
                className="bg-card border-border h-14 pl-12 font-mono text-base"
                aria-label="Cari produk"
              />
            </div>
            <Button
              type="submit"
              size="lg"
              className="bg-accent text-accent-foreground hover:bg-accent/90 h-14 px-8"
            >
              Cari
            </Button>
          </div>
        </form>

        <div class="flex flex-wrap gap-4">
          <a href="/katalog">
            <Button variant="secondary">Lihat Katalog</Button>
          </a>
          <a
            href="https://wa.me/6285246428746"
            target="_blank"
            rel="noopener noreferrer"
          >
            <Button variant="secondary">Hubungi Sales</Button>
          </a>
        </div>
      </div>
    </div>
  </section>

  {/* Categories */}
  <section class="bg-background mx-auto max-w-7xl py-16">
    <div class="container mx-auto px-4">
      <h2
        class="text-foreground mb-8 text-center text-2xl font-bold md:text-3xl"
      >
        Kategori Produk
      </h2>
      <div class="grid grid-cols-2 gap-4 md:grid-cols-4 md:gap-6">
        {
          categories.map((category) => {
            const Icon = category.icon;
            return (
              <a
                href={`/katalog?category=${category.slug}`}
                class="group hover:border-accent block rounded-lg border p-6 text-center transition-colors"
              >
                <div class="bg-secondary mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full">
                  <Icon className="h-8 w-8 text-primary" />
                </div>
                <h3 class="text-foreground group-font-semibold">
                  {category.label}
                </h3>
              </a>
            );
          })
        }
      </div>
    </div>
  </section>

  {/* Featured Products */}
  <section class="bg-secondary/30 mx-auto max-w-7xl py-16">
    <div class="container mx-auto px-4">
      <div class="mb-8 flex items-center justify-between">
        <h2 class="text-foreground text-2xl font-bold md:text-3xl">
          Produk Unggulan
        </h2>
        <a href="/katalog" class={buttonVariants({ variant: "outline" })}>
          Lihat Semua
          <ArrowRight className="ml-2 h-4 w-4" />
        </a>
      </div>

      <FeaturedProducts client:visible />
    </div>
  </section>

  {/* Trust Indicators */}
  <section class="bg-primary text-primary-foreground py-16">
    <div class="container mx-auto max-w-7xl px-4">
      <div class="grid grid-cols-2 gap-8 text-center md:grid-cols-4">
        <div>
          <div class="text-accent mb-2 text-3xl font-bold md:text-4xl">14+</div>
          <div class="text-primary-foreground/80 text-sm">Tahun Pengalaman</div>
        </div>
        <div>
          <div class="text-accent mb-2 text-3xl font-bold md:text-4xl">
            500+
          </div>
          <div class="text-primary-foreground/80 text-sm">
            Pelanggan Industri
          </div>
        </div>
        <div>
          <div class="text-accent mb-2 text-3xl font-bold md:text-4xl">
            10K+
          </div>
          <div class="text-primary-foreground/80 text-sm">SKU Tersedia</div>
        </div>
        <div>
          <div class="text-accent mb-2 text-3xl font-bold md:text-4xl">
            24/7
          </div>
          <div class="text-primary-foreground/80 text-sm">Dukungan Teknis</div>
        </div>
      </div>
    </div>
  </section>

  {/* CTA Section */}
  <section class="bg-background py-16">
    <div class="container mx-auto max-w-7xl px-4 text-center">
      <h2 class="text-foreground mb-4 text-2xl font-bold md:text-3xl">
        Butuh Bantuan Mencari Suku Cadang?
      </h2>
      <p class="text-muted-foreground mx-auto mb-8 max-w-2xl">
        Tim teknisi kami siap membantu Anda menemukan suku cadang yang tepat
        untuk mesin CNC Anda. Hubungi kami melalui WhatsApp untuk konsultasi
        gratis.
      </p>
      <a
        href="https://wa.me/6285246428746"
        target="_blank"
        rel="noopener noreferrer"
        class={buttonVariants({
          size: "lg",
          className: "bg-accent text-accent-foreground hover:bg-accent/90",
        })}
      >
        Chat via WhatsApp
        <ArrowRight className="ml-2 h-5 w-5" />
      </a>
    </div>
  </section>
</BaseLayout>
